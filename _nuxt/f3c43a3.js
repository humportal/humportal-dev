(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{585:function(e,t,r){"use strict";r.r(t);r(5),r(4),r(6),r(3),r(7);var n=r(19),o=r(0),c=(r(66),r(2),r(1),r(13),r(49)),d=r.n(c),l=r(75);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var f={components:{},data:function(){return{aidTypes:[],publisherID:"fcdo",earmarkingMapping:{},aidTypeFields:[{key:"aid_type.code",label:"Code",sortable:!0},{key:"aid_type.name_en",label:"Name",sortable:!0},{key:"value_usd.sum",label:"Value (USD)",formatter:function(e){return e.toLocaleString(void 0,{maximumFractionDigits:0})},thClass:"text-right",tdClass:"text-right",sortable:!0},{key:"earmarking",label:"Earmarking (DRAFT Mapping)",sortable:!0}]}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({publisherIATIIdentifier:function(){var e=this,t=this.signatoryData.filter((function(t){return t.publisherID==e.publisherID}));if(t.length>0)return t[0].iatiOrganisationID},cdfdLink:function(){return"https://countrydata.iatistandard.org/data/custom/?drilldowns=aid_type&filters=reporting_organisation%3A".concat(this.publisherIATIIdentifier,"%3Btransaction_type%3A3,4%3Byear%3A").concat(this.year,"%3Bhumanitarian%3A1")},year:function(){return(new Date).getFullYear()-1},lastUpdated:function(){var e=new Date(this.metadata.finished);return"".concat(e.toLocaleDateString(void 0,{})," ").concat(e.toLocaleTimeString(void 0,{}))}},Object(l.b)(["signatoryData","analyticsURL","metadata"])),methods:{loadEarmarkingMapping:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("https://raw.githubusercontent.com/humportal/humportal-dev/gh-pages/gb_earmarking_mapping.json");case 2:r=t.sent,data=r.data,e.earmarkingMapping=data.reduce((function(summary,e){return summary[e.Code]=e["GB Earmarking"],summary}),{});case 5:case"end":return t.stop()}}),t)})))()},loadSignatoryAidTypes:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("https://cdfd.iati.opendataservices.coop/api/babbage/cubes/iatiline/aggregate/?drilldown=aid_type&order=value_usd.sum:desc&cut=year:%22".concat(e.year,'%22|humanitarian:"1"|transaction_type.code:"3";"4"|reporting_organisation.code:%22').concat(e.publisherIATIIdentifier,"%22&aggregates=value_usd.sum&simple&pagesize=10"));case 2:r=t.sent,data=r.data,e.aidTypes=data.cells;case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("loadSignatoryData");case 2:return t.next=4,e.$store.dispatch("loadMetadata");case 4:return t.next=6,e.loadEarmarkingMapping();case 6:return t.next=8,e.loadSignatoryAidTypes();case 8:case"end":return t.stop()}}),t)})))()},watch:{publisherID:function(){this.loadSignatoryAidTypes()}}},h=f,y=r(74),component=Object(y.a)(h,(function(){var e=this,t=e._self._c;return t("b-card",{staticClass:"mb-5"},[t("h5",[e._v("Publishersâ€™ earmarking according to draft mapping")]),e._v(" "),t("b-form-group",{attrs:{label:"Select a publisher"}},[t("b-select",{attrs:{options:e.signatoryData,"text-field":"name","value-field":"publisherID"},model:{value:e.publisherID,callback:function(t){e.publisherID=t},expression:"publisherID"}})],1),e._v(" "),t("b-table",{attrs:{"sort-by":"aid_type.code",items:e.aidTypes,fields:e.aidTypeFields},scopedSlots:e._u([{key:"cell(earmarking)",fn:function(data){return[e._v("\n      "+e._s(e.earmarkingMapping[data.item["aid_type.code"]])+"\n    ")]}}])}),e._v(" "),t("p",{staticClass:"text-muted"},[e._v("Showing humanitarian spending for "+e._s(e.year)+", using\n    data from "),t("a",{attrs:{href:e.cdfdLink}},[e._v("IATI's Country Development Finance Data tool")]),e._v(",\n    mapped against Grand Bargain Earmarking Categories using the\n    "),t("a",{attrs:{href:"#mapping-oecddac-aid-types-to-earmarking-classifications"}},[e._v("draft mapping table\n    below")]),e._v(".")]),e._v(" "),t("p",{staticClass:"text-muted font-italic text-md-right"},[e._v("Last calculated: "+e._s(e.lastUpdated))])],1)}),[],!1,null,null,null);t.default=component.exports}}]);